language: java
jdk:
- oraclejdk9
cache:
  directories:
  - "$HOME/.m2"
sudo: required
services:
- docker
notifications:
  email:
  - dietrich.unverzagt@ikor.de
  on_success: always
  on_failure: always
branches:
  only:
  - master
env:
  global:
  - secure: Vc+owEFgG1NADMksYpCnr5OlmUCWfwZj4azI9GbOIb0KhFyfc8nZ7Q0PeXdiHU3BXC4tuVO2XxmmtDfxkiQlzaais1aRq6dKCJnlsWC2CFb47GXcFimr0MHod43Z02CLeMDb3sO2Ioh633jS3x4/jk0RED50sDxYBQQgr8yxNKK9f6vDxT1WFrJkWLe+R3PYNKrit7iTiVIkIN0DR4mK094ZIN68ukbksHaYnqk/ZuPQjamdkyrwokPG5JnxsyIbbVh8ZINJhVXAbrPvVBcsJigzQ9xuXXsKG7FTGOwBIi2/CLVliWvXkNtYwuHKI+Tqf9FYOl/UQP8ScV9lgnFTAQLiUtnCK8/LlZkFaKUtfZY8Sgh2h6icTeJAa2ZWCau2k8MSkhFkWpcd1HXOj+/uWCy+3a8/0dkKfJFTzZoe4sgKjOEtlbYE5u9Y3aqVCZLRVENFowNI2fxhyPI1Pjym32R/dAGTgIoxfs4qisMLiHcQDZkvJhxAkgN1LyxUnYQcoNC72SKgl6yWlj8EKUSVf3iclmMqh+qCz8Yg3o22ukL8HgOG2tlc6ja8nvfHuWFOEEkbnP5PPhNqIy390ubbNiiP6+6lnSGE2IkpZCI8W0oEwlSHHlMlQTkpmVBiN4UFTy1SkdPJ74z1IgmhJ9WvGoYGlfmRixO3BaltPuulTy8=
  - secure: p1E7PnEvMdhDJyiu2LAZkOBi8vsQ8RIOuDeUZiNqOdERhTCgE/LnzLCwnDOUkQsecNY7MUeoS8XRUQXrVixzvmkFoQhQM71V2fl2F59kPe+v1RTGJbAbistx9FkDg+SsnO2q9CxxcQOfdMWHAkGHaIPdLXi4xVUPKn3qXX7zxfdm+BIi2su9xBAv6pR4Ox4+N/CysSygammSZEyt7diqQtsubz5hESUD3/yScXaEti6bbrc87E9tqv4ZZk+d81TjvPrEq04/QIdl6CRnHaVXzt742hlKzw+XdflTwEnR2AFbCHwXTsfcjMPXLHnENgWl+WuiUmRVdZQJ+bLsMklW/lAJlvjeXJvOAPyvC4bLNHrvs105D1fbJ2AWk056yyekKXmOFjhOOIj/aVyTYkdpU6mir/27aESHNqpeE7+zIi2d/aI+IQoK1IpQ2l2TZTWbrdFRiy0jn8z9KDZDZ8n9OGHUSqRTAP2bJXN46fW3iXIgnQVACO1dNZW6j9x8E7jnPuUv0MweCSuVl3aA+NhudE8ObaP0NuoHZi1gmmzTfNB93bWGYJksFCxlvMKgD0AwNO+U3d/M2vbqfIts0lBRzD6w+QHEvovk4tQQkcdjwsdRymrAOTxY4c5Z1AiSOlvkQuBtfuqHj3UJIyry8PXkv2tLuuXEIW1mFpupximDD6s=
  - secure: LLx0KeeIodaJuJcsMYjInCsHTRQMiStaxhTrsXYozmPyPJbZOfLuotw3nhBbPXA9wMlmB6ZDizEX6n3cGW4A24XfuzJ+LhsCqOH9DiVAPPD7xH0EE9kfoMZ60o/GsoEZHogSFUK4WNWf8j0jjUJT6lgmd1fE7agZSB08nirMW34GWkR6XrbuU4CQxySU0V5v04SBrOard+0qDEgvC2OF/zkmt2TiLk7HKBTNAnXpSS2cV4PlmqHFdRRrYY2pMLKJOwvtsyTtx2xFqc6jkioFTUjmqKvm64QeDDt7W3SkjjLFNEuFmQOJtIRZA3ypGxCheDqm8PXl7psTWcmvKpITN7qCw7jTjR+x3aY0QOBXUI01f1vRfzbqT/upDhEiQ+99y9w5aHkCFVYfZJ/aD+Qkg5fShUJm/OjvMp/9F2NIWe0wghY8WcoqTcUbWeGlYp2oa22HSkQdRWyCFEW93/sO2IpbWHG9L/OrAyjMqEfEC1eJemuF8Kx5PhkYQBSlQNfvfk++nHfwK/qY8t1UAImy4Am8ln0Q/0XqXg1k+W+5Ql54dsDiyMlmXUyjBvc5mGXm8cO7ZGQWxfZT92tDFc+ZRzIHe8T+jEzbl5vv3/qUtVfWSxth11wQ5QyqtNreqvPa7Mt1pJHp/uP/gy/SCtbfu26jnoPYdEMLbsGv5Pji1G8=
  - secure: cZB5oBU1TBdGiSuze/ZMOQDpEIluIqsCFMC5c7RgexBXM+7YArp/kY9eqyAsd63CB4vff9Et89aZfvXobwnXC/fmu4UL2UQq9AGCfosMRVpK7bKHPC12tqWJoqMOL50UKSUPrnu5IBIxn7v+76GuwgkOLTUBpEu3NG15Go+9tLSUqVDyU9uW0CZcOPbtH1WNtOJHBrdNMKG4rdB/bliT6smCNBmrJkg0BJAwFpWC9NrQ9n1OJZxrBBb8vfcSx9C7g8nD1MbFsy0/vr+k4Jo7KGwlpGP2wgauc7ir7sbmeRUQ3nuL+70C50nE91Iiv7bZf8g/hY8LeUH4m3K9C+1slvTXB5cIBrUEeSY16wfMRzd6krsmrC5x5dJMBfd07nFA580uG6EsFb1x9WsUUR3NtP0qGGgPCgb6BEjaNHD3rUw5sJNtnZC/1bk8J1oIEpwa5xWgZaLj4WasW8dGqZfX62Nks+PpA/3AOpmgG5qV3Jgz3xHkYfmOccsX0I9Wjl8vpaxJ5t8n6PTVyCeJOzVPfsoR2G/2vE1O8sAR09m8HfULXJ/h1yNDCV5TAb2hOwzWq4A+c1DoN3Q/QS/7fJZWvLqTL2VtrB0unMuRKy/wiWOWudfnS0gYsEEdBxQXL39b94zQ7N6iDM8EjVWYKTxl010bTQs6mp8tz7CfAokReWY=
  - secure: pGe4mA5/ZSxsUYKswBPhqX43nHJbR31c5rpUdvZb+kwxNQgxUc0duxA2DuTCsh2QaTKp3K2BcZ38pVeHSFbRxvvMAlsqQ+OrtDEkBVxlMiajiDpk++T4rDfNo+abcVWbbapU8AkH3xDTecg7NYwUyzqsHeufoF3E1GvXHO2PTz60WS/6SFMKQaZY2PSlsdJqsWnDugWzepfYBIOftnaxEDcHvXA+mWTzqJzI7amiZBLCD9GDzcmlBiQ4knFgm7rYCXWAMnK5YFp7cB86dMgCnWwcR2jUTCZYBkhguzqCzYxUs6HhgqlJ3F6PbR8VivWteNMlsrIuIiO1Y+2cvFtdrTnaNU6qoXyBzClFUSVRDAai6UyWAk3QTyJ6HxqIi3rEVFjAVc3+bNe8/oj39AORquupo/VpOUAW0atYtcLPLHPQLb50l4xaGbOZHtDzpl8bMmFBDLX7AkR/IdYtskwTMJRQSyepmzNbfQNOSYahLQUI3AF2fHPTcsxsujAAsNrtYgVriY1oqma2G1tuHFK968DaMyk7cXDUYLYPr683E2LLL+D5LXnJ/yMKrDxSr150FlNk8LtT111gJhwuBRBg5fy2hXZ0rOumAWGXOxz14p0ipe2Wv51mF0QT3+/7LGdLCYlOZGML83xJCDIK8zdOI8Wc35sBvXy6XuzIdeRos4U=
before_install:
- gem install travis -v 1.8.5 --no-document
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=chapter10-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
- export CONTAINER_IP=52.23.181.91
- export PLATFORM_TEST_NAME="chapter10-platform-tests"
script:
- sh travis_scripts/tag_build.sh
- sh travis_scripts/build_services.sh
- sh travis_scripts/deploy_to_docker_hub.sh
- sh travis_scripts/deploy_to_amazon_ecs.sh
# sh travis_scripts/trigger_platform_tests.sh
